{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderImages(images) {\n  const galleryElement = document.querySelector('.gallery');\n\n  const imagesSet = images\n    .map(image => {\n      return `\n    <div class=\"image-card\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>\n      <div class=\"img-details\">\n     <div class=\"coms\"> <p>Likes</p> ${image.likes}</div>\n      <div class=\"coms\"><p>Views</p> ${image.views}</div>\n      <div class=\"coms\"><p>Comments</p> ${image.comments}</div>\n      <div class=\"coms\"><p>Downloads</p> ${image.downloads}</div>\n      </div>\n      </div>\n    `;\n    })\n    .join('');\n  galleryElement.insertAdjacentHTML('beforeend', imagesSet);\n\n  lightbox.refresh();\n}\n\nexport function renderError(error) {\n  iziToast.error({\n    title: 'Error',\n    message: error.message,\n    position: 'topRight',\n    timeout: 5000,\n  });\n}\n\nexport function clearError() {\n  iziToast.hide({}, 'all');\n}\n","import axios from 'axios';\nimport { renderImages } from './render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction toggleLoader(isLoading) {\n  const loader = document.getElementById('loader');\n  if (isLoading) {\n    loader.style.display = 'block';\n  } else {\n    loader.style.display = 'none';\n  }\n}\ntoggleButton(false);\nfunction toggleButton(isVisible) {\n  const button = document.querySelector('.load-more');\n\n  if (isVisible) {\n    button.style.display = 'block';\n  } else {\n    button.style.display = 'none';\n  }\n}\nconst API_KEY = '46931303-4adba5c677ceeed1d52c819f0';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst defaultOptions = {\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\nlet currentPage = 1;\n\nexport async function fetchImages(\n  query,\n  page = 1,\n  perPage = 20,\n  options = defaultOptions\n) {\n  toggleLoader(true);\n  try {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n      query\n    )}&page=${page}&per_page=${perPage}&image_type=${\n      options.image_type\n    }&orientation=${options.orientation}&safesearch=${options.safesearch}`;\n    const response = await axios.get(url);\n    if (response.status !== 200) {\n      throw new Error('Error fetching images');\n    }\n    return response.data.hits;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  } finally {\n    toggleButton(true);\n  }\n}\n\nconst morePictures = document.querySelector('.load-more');\nmorePictures.addEventListener('click', async () => {\n  const query = document\n    .querySelector('#form input[name=\"query\"]')\n    .value.trim();\n\n  if (!query) return;\n\n  currentPage += 1;\n  toggleButton(false);\n  try {\n    const images = await fetchImages(query, currentPage, 15, defaultOptions);\n    if (images.length === 0) {\n      iziToast.info({\n        title: 'We are sorry,',\n        message: 'but you have reached the end of search results.',\n        position: 'topRight',\n        timeout: 3000,\n      });\n      toggleButton(false);\n    } else {\n      renderImages(images);\n      smoothScroll();\n      toggleButton(true);\n    }\n  } catch (error) {\n    console.error(error);\n    throw error;\n  } finally {\n    toggleLoader(false);\n  }\n});\n\nfunction smoothScroll() {\n  const firstImageCard = document.querySelector('.image-card');\n  if (firstImageCard) {\n    const cardHeight = firstImageCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, renderError } from './js/render-functions.js';\n\nfunction toggleLoader(isLoading) {\n  const loader = document.getElementById('loader');\n  if (isLoading) {\n    loader.style.display = 'block';\n  } else {\n    loader.style.display = 'none';\n  }\n}\n\nconst form = document.querySelector('#form');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const query = event.target.elements.query.value.trim();\n  document.querySelector('.gallery').innerHTML = '';\n  if (!query) {\n    toggleLoader(false);\n    iziToast.error({\n      title: 'Sorry,',\n      message:\n        'there are no images matching your search query. Please, try again!',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    return;\n  }\n  toggleLoader(true);\n  try {\n    const images = await fetchImages(query);\n    if (images.length === 0) {\n      iziToast.error({\n        title: 'Sorry,',\n        message:\n          'There are no images matching your search query. Please, try again!',\n        position: 'topRight',\n        timeout: 3000,\n      });\n    } else {\n      renderImages(images);\n    }\n  } catch (error) {\n    renderError(error);\n  } finally {\n    toggleLoader(false);\n  }\n});\n"],"names":["lightbox","SimpleLightbox","renderImages","images","galleryElement","imagesSet","image","renderError","error","iziToast","toggleLoader","isLoading","loader","toggleButton","isVisible","button","API_KEY","BASE_URL","defaultOptions","currentPage","fetchImages","query","page","perPage","options","url","response","axios","morePictures","smoothScroll","firstImageCard","cardHeight","form","event"],"mappings":"owBAKA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAiB,SAAS,cAAc,UAAU,EAElDC,EAAYF,EACf,IAAIG,GACI;AAAA;AAAA,iBAEIA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,uCAGnBA,EAAM,KAAK;AAAA,uCACXA,EAAM,KAAK;AAAA,0CACRA,EAAM,QAAQ;AAAA,2CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIrD,EACA,KAAK,EAAE,EACVF,EAAe,mBAAmB,YAAaC,CAAS,EAExDL,EAAS,QAAO,CAClB,CAEO,SAASO,EAAYC,EAAO,CACjCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EAAM,QACf,SAAU,WACV,QAAS,GACb,CAAG,CACH,CCrCA,SAASE,EAAaC,EAAW,CAC/B,MAAMC,EAAS,SAAS,eAAe,QAAQ,EAC3CD,EACFC,EAAO,MAAM,QAAU,QAEvBA,EAAO,MAAM,QAAU,MAE3B,CACAC,EAAa,EAAK,EAClB,SAASA,EAAaC,EAAW,CAC/B,MAAMC,EAAS,SAAS,cAAc,YAAY,EAE9CD,EACFC,EAAO,MAAM,QAAU,QAEvBA,EAAO,MAAM,QAAU,MAE3B,CACA,MAAMC,EAAU,qCACVC,EAAW,2BACXC,EAAiB,CACrB,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EACA,IAAIC,EAAc,EAEX,eAAeC,EACpBC,EACAC,EAAO,EACPC,EAAU,GACVC,EAAUN,EACV,CACAR,EAAa,EAAI,EACjB,GAAI,CACF,MAAMe,EAAM,GAAGR,CAAQ,QAAQD,CAAO,MAAM,mBAC1CK,CACD,CAAA,SAASC,CAAI,aAAaC,CAAO,eAChCC,EAAQ,UACd,gBAAoBA,EAAQ,WAAW,eAAeA,EAAQ,UAAU,GAC9DE,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,uBAAuB,EAEzC,OAAOA,EAAS,KAAK,IACtB,OAAQlB,EAAO,CACd,cAAQ,MAAMA,CAAK,EACbA,CACV,QAAY,CACRK,EAAa,EAAI,CAClB,CACH,CAEA,MAAMe,EAAe,SAAS,cAAc,YAAY,EACxDA,EAAa,iBAAiB,QAAS,SAAY,CACjD,MAAMP,EAAQ,SACX,cAAc,2BAA2B,EACzC,MAAM,KAAI,EAEb,GAAKA,EAEL,CAAAF,GAAe,EACfN,EAAa,EAAK,EAClB,GAAI,CACF,MAAMV,EAAS,MAAMiB,EAAYC,EAAOF,EAAa,GAAID,CAAc,EACnEf,EAAO,SAAW,GACpBM,EAAS,KAAK,CACZ,MAAO,gBACP,QAAS,kDACT,SAAU,WACV,QAAS,GACjB,CAAO,EACDI,EAAa,EAAK,IAElBX,EAAaC,CAAM,EACnB0B,IACAhB,EAAa,EAAI,EAEpB,OAAQL,EAAO,CACd,cAAQ,MAAMA,CAAK,EACbA,CACV,QAAY,CACRE,EAAa,EAAK,CACnB,EACH,CAAC,EAED,SAASmB,GAAe,CACtB,MAAMC,EAAiB,SAAS,cAAc,aAAa,EAC3D,GAAIA,EAAgB,CAClB,MAAMC,EAAaD,EAAe,sBAAqB,EAAG,OAC1D,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,KAAM,EACN,SAAU,QAChB,CAAK,CACF,CACH,CChGA,SAASrB,EAAaC,EAAW,CAC/B,MAAMC,EAAS,SAAS,eAAe,QAAQ,EAC3CD,EACFC,EAAO,MAAM,QAAU,QAEvBA,EAAO,MAAM,QAAU,MAE3B,CAEA,MAAMoB,EAAO,SAAS,cAAc,OAAO,EAE3CA,EAAK,iBAAiB,SAAU,MAAMC,GAAS,CAC7CA,EAAM,eAAc,EAEpB,MAAMZ,EAAQY,EAAM,OAAO,SAAS,MAAM,MAAM,OAEhD,GADA,SAAS,cAAc,UAAU,EAAE,UAAY,GAC3C,CAACZ,EAAO,CACVX,EAAa,EAAK,EAClBD,EAAS,MAAM,CACb,MAAO,SACP,QACE,qEACF,SAAU,WACV,QAAS,GACf,CAAK,EACD,MACD,CACDC,EAAa,EAAI,EACjB,GAAI,CACF,MAAMP,EAAS,MAAMiB,EAAYC,CAAK,EAClClB,EAAO,SAAW,EACpBM,EAAS,MAAM,CACb,MAAO,SACP,QACE,qEACF,SAAU,WACV,QAAS,GACjB,CAAO,EAEDP,EAAaC,CAAM,CAEtB,OAAQK,EAAO,CACdD,EAAYC,CAAK,CACrB,QAAY,CACRE,EAAa,EAAK,CACnB,CACH,CAAC"}